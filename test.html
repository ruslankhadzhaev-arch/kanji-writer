<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Kanji Diagnostic</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
        }

        .log {
            margin-bottom: 5px;
            padding: 5px;
            border-bottom: 1px solid #eee;
        }

        .success {
            color: green;
            font-weight: bold;
        }

        .error {
            color: red;
        }
    </style>
</head>

<body>
    <h1>Kanji Data URL Diagnostic</h1>
    <p>Testing URLs for character: <strong id="char"></strong></p>
    <div id="logs"></div>

    <script>
        const CHAR = '猫'; // Cat
        document.getElementById('char').innerText = CHAR;
        const logs = document.getElementById('logs');

        function log(msg, type) {
            const div = document.createElement('div');
            div.className = 'log ' + (type || '');
            div.innerText = msg;
            logs.appendChild(div);
        }

        const candidates = [
            `https://raw.githubusercontent.com/ruslankhadzhaev-arch/kanji-writer/main/data/${CHAR}.json`,
            `https://cdn.jsdelivr.net/npm/hanzi-writer-data-jp@latest/${CHAR}.json`,
            `https://unpkg.com/hanzi-writer-data-jp@latest/${CHAR}.json`,
            `https://cdn.jsdelivr.net/npm/hanzi-writer-data-jp@0.3/${CHAR}.json`,
            `https://raw.githubusercontent.com/cwam/hanzi-writer-data-jp/master/data/${CHAR}.json`
        ];

        async function checkUrl(url) {
            log(`Checking: ${url}...`);
            try {
                const res = await fetch(url);
                if (res.ok) {
                    const data = await res.json();
                    if (data && data.strokes) {
                        log(`[SUCCESS] Found data at: ${url}`, 'success');
                        return true;
                    }
                }
                throw new Error(res.status);
            } catch (e) {
                log(`[FAIL] ${url} (${e.message})`, 'error');
                return false;
            }
        }

        async function run() {
            for (const url of candidates) {
                const found = await checkUrl(url);
                if (found) {
                    log("✓ Working URL found!", 'success');
                    break;
                }
            }
        }

        run();
    </script>
</body>

</html>